# Frequently Asked Questions (FAQ)

Common questions about TLE parsing and usage.

## General Questions

### What is a TLE?

A Two-Line Element Set (TLE) is a standardized data format that describes the orbit of an Earth-orbiting object at a specific point in time. TLEs are generated by NORAD (North American Aerospace Defense Command) and distributed by organizations like CelesTrak and Space-Track.

**See:** [TLE Format Guide](guides/TLE_FORMAT.md) for complete details.

---

### Where can I get TLE data?

**Free Sources:**
- **CelesTrak**: https://celestrak.org/ - Most popular, no account required
- **Space-Track**: https://www.space-track.org/ - Official source, free account required
- **N2YO**: https://www.n2yo.com/ - User-friendly interface
- **HeavensAbove**: https://www.heavens-above.com/ - Amateur astronomy focus

**Example URLs:**
```
# ISS TLE from CelesTrak
https://celestrak.org/NORAD/elements/gp.php?CATNR=25544&FORMAT=TLE

# All stations
https://celestrak.org/NORAD/elements/gp.php?GROUP=stations&FORMAT=TLE

# Active satellites
https://celestrak.org/NORAD/elements/gp.php?GROUP=active&FORMAT=TLE
```

---

### How often are TLEs updated?

**Frequency varies by orbit:**
- **LEO (ISS, Starlink)**: Multiple times per day
- **MEO (GPS)**: Daily to weekly
- **GEO**: Weekly to monthly
- **High Altitude**: Less frequently

**Best Practice:** Update TLEs before critical operations. TLEs older than 30 days have reduced accuracy.

---

### How accurate are TLEs?

**Accuracy depends on:**
- **Time since epoch**: Accuracy degrades over time
- **Orbit type**: LEO less accurate than GEO (more perturbations)
- **Solar activity**: Affects atmospheric drag
- **Satellite maneuvers**: TLE won't reflect future maneuvers

**Typical Errors:**
- **1-2 km** within 24 hours of epoch
- **5-10 km** after 3-7 days
- **>50 km** after 30+ days (for LEO)

**Not suitable for:** Collision avoidance (use high-precision ephemerides), critical rendezvous operations.

---

## Parser Questions

### Why am I getting a checksum error?

**Common Causes:**
1. **Data corruption** during download/transfer
2. **Manual editing** without recalculating checksum
3. **Copy-paste errors** (extra spaces, truncation)
4. **Historical TLEs** with errors

**Solutions:**
```javascript
// Option 1: Use permissive mode
const result = parseTLE(tleData, { mode: 'permissive' });

// Option 2: Disable checksum validation
const result = parseTLE(tleData, { strictChecksums: false });

// Option 3: Fix the checksum
const { calculateChecksum } = require('tle-parser');
const lineWithoutChecksum = line.substring(0, 68);
const correctChecksum = calculateChecksum(lineWithoutChecksum);
const fixedLine = lineWithoutChecksum + correctChecksum;
```

**See:** [Troubleshooting Guide](guides/TROUBLESHOOTING.md#checksum-validation-failed)

---

### What's the difference between strict and permissive mode?

**Strict Mode (default):**
- Throws error on any validation failure
- Best for critical applications
- Ensures data integrity

**Permissive Mode:**
- Returns data even with non-critical errors
- Errors become warnings
- Best for historical data or best-effort parsing

```javascript
// Strict mode (default)
try {
  const result = parseTLE(tleData);
  // Use result
} catch (error) {
  // Handle error
}

// Permissive mode
const result = parseTLE(tleData, { mode: 'permissive' });
if (result.warnings) {
  console.warn('Warnings:', result.warnings);
}
// Use result (may have warnings)
```

**See:** [Error Handling Guide](guides/ERROR_HANDLING.md#parsing-modes)

---

### How do I parse multiple TLEs from a file?

```javascript
const fs = require('fs');
const { parseTLE } = require('tle-parser');

const fileContent = fs.readFileSync('satellites.txt', 'utf8');
const tleBlocks = fileContent.split(/\n\s*\n/);  // Split by empty lines

const satellites = tleBlocks.map(block => {
  try {
    return parseTLE(block.trim(), { mode: 'permissive' });
  } catch (error) {
    console.error('Failed to parse:', error.message);
    return null;
  }
}).filter(Boolean);  // Remove nulls

console.log(`Parsed ${satellites.length} satellites`);
```

**See:** [Usage Examples](guides/USAGE_EXAMPLES.md#multiple-tles-from-a-file)

---

### Can I use this in the browser?

**Yes!** The parser works in both Node.js and browsers.

```html
<!-- Option 1: From CDN (if published) -->
<script src="https://unpkg.com/tle-parser"></script>

<!-- Option 2: Bundle with webpack/rollup -->
```

```javascript
// ES6 import
import { parseTLE } from 'tle-parser';

// CommonJS
const { parseTLE } = require('tle-parser');

// Usage
const tle = await fetch('/api/tle/25544').then(r => r.text());
const result = parseTLE(tle);
```

**Note:** Fetching TLEs from external sources may require CORS proxy or backend endpoint.

**See:** [Integration Examples](guides/USAGE_EXAMPLES.md#integration-examples)

---

### Does this parser calculate satellite positions?

**No.** This library only **parses** TLE data into a structured format. It does not perform orbit propagation.

**For Propagation:** Use libraries like:
- **satellite.js** (JavaScript): https://github.com/shashwatak/satellite-js
- **python-sgp4** (Python): https://pypi.org/project/sgp4/
- **Orekit** (Java): https://www.orekit.org/

**Example Workflow:**
```javascript
const { parseTLE } = require('tle-parser');
const satellite = require('satellite.js');

// Parse TLE
const parsed = parseTLE(tleData);

// Extract lines for propagation
const line1 = tleData.split('\n')[0];
const line2 = tleData.split('\n')[1];

// Use satellite.js for position calculation
const satrec = satellite.twoline2satrec(line1, line2);
const positionAndVelocity = satellite.propagate(satrec, new Date());
```

---

## Data Interpretation Questions

### What does eccentricity mean?

**Eccentricity (e)** describes the shape of the orbit:
- **e = 0**: Perfect circle (constant altitude)
- **0 < e < 1**: Ellipse (altitude varies)
- **Larger e**: More elliptical

**TLE Quirk:** Decimal point is assumed:
```
TLE value: 0001671
Actual value: 0.0001671 (very circular)
```

**Conversion:**
```javascript
const eccentricity = parseFloat('0.' + result.eccentricity);
console.log(eccentricity);  // 0.0001671
```

**See:** [Orbital Mechanics](guides/ORBITAL_MECHANICS.md#3-eccentricity-e)

---

### How do I calculate the orbital period?

```javascript
const { parseTLE } = require('tle-parser');

const result = parseTLE(tleData);
const meanMotion = parseFloat(result.meanMotion);  // rev/day

const periodMinutes = 1440 / meanMotion;  // 1440 = minutes in a day
const periodHours = 24 / meanMotion;

console.log(`Period: ${periodMinutes.toFixed(2)} minutes`);
console.log(`Period: ${periodHours.toFixed(2)} hours`);

// Example: ISS with mean motion 15.49
// Period = 1440 / 15.49 ≈ 93 minutes
```

**See:** [Orbital Mechanics - Mean Motion](guides/ORBITAL_MECHANICS.md#6-mean-motion-n)

---

### What does B* drag term mean?

**B*** (B-star) is a drag coefficient that indicates atmospheric resistance:

```
B* = Cd × A / (2 × m)
where:
  Cd = Drag coefficient
  A = Cross-sectional area
  m = Satellite mass
```

**Interpretation:**
- **Larger value**: More drag (large, lightweight, or low altitude)
- **Near zero**: Minimal drag (high altitude or compact/heavy)

**Typical Values:**
- LEO satellites: 1×10⁻⁵ to 1×10⁻³
- MEO/GEO: ~0 (negligible atmosphere)

**TLE Format:** Scientific notation with assumed decimal
```
TLE: 35580-4
Means: 0.35580 × 10⁻⁴ = 0.000035580
```

**See:** [TLE Format - B* Drag Term](guides/TLE_FORMAT.md#b-drag-term)

---

### How do I know if a satellite will pass over my location?

**Check inclination:**

A satellite can only pass over latitudes **≤ inclination**.

```javascript
function canSeeFromLatitude(tle, stationLatitude) {
  const inclination = parseFloat(tle.inclination);
  return Math.abs(stationLatitude) <= inclination;
}

// Example: ISS (51.6° inclination) over New York (40.7°N)
const issTLE = parseTLE(issData);
const canSee = canSeeFromLatitude(issTLE, 40.7);
console.log(canSee);  // true (51.6° > 40.7°)

// Example: ISS over Oslo (59.9°N)
const canSeeOslo = canSeeFromLatitude(issTLE, 59.9);
console.log(canSeeOslo);  // false (51.6° < 59.9°)
```

**Note:** This only tells if passes are **possible**, not when they occur. Use orbit propagation for pass predictions.

**See:** [Orbital Mechanics - Inclination](guides/ORBITAL_MECHANICS.md#1-inclination-i)

---

### What's the difference between GEO and GSO?

**Geostationary (GEO):**
- Period: 24 hours (1 rev/day)
- Inclination: 0° (equatorial)
- Eccentricity: ~0 (circular)
- Appears **stationary** over one point on equator

**Geosynchronous (GSO):**
- Period: 24 hours (1 rev/day)
- Inclination: >0° or eccentricity >0
- Traces figure-8 pattern over Earth
- Not stationary but repeats daily

```
GEO is a special case of GSO
All GEO orbits are GSO, but not all GSO are GEO
```

**See:** [Orbit Types](guides/ORBITAL_MECHANICS.md#orbit-types)

---

## Technical Questions

### Is this library TypeScript-friendly?

**Yes!** Full TypeScript support with comprehensive type definitions.

```typescript
import { parseTLE, ParsedTLE, TLEParseOptions, TLEError } from 'tle-parser';

const options: TLEParseOptions = {
  mode: 'permissive',
  includeWarnings: true
};

const result: ParsedTLE = parseTLE(tleData, options);

// All fields are typed
const satNum: string = result.satelliteNumber1;
const inclination: string = result.inclination;
const warnings: readonly TLEError[] | undefined = result.warnings;
```

**See:** [API Reference - TypeScript Usage](api/API_REFERENCE.md#typescript-usage)

---

### How do I handle errors?

**Three approaches:**

**1. Try-Catch (Strict Mode):**
```javascript
try {
  const result = parseTLE(tleData);
} catch (error) {
  if (error instanceof TLEValidationError) {
    console.error('Validation errors:', error.errors);
  }
}
```

**2. Permissive Mode:**
```javascript
const result = parseTLE(tleData, { mode: 'permissive' });
if (result.warnings) {
  console.warn('Warnings:', result.warnings);
}
```

**3. Pre-Validation:**
```javascript
const { validateTLE } = require('tle-parser');

const validation = validateTLE(tleData);
if (validation.valid) {
  const result = parseTLE(tleData);
}
```

**See:** [Error Handling Guide](guides/ERROR_HANDLING.md)

---

### Can I validate TLE data without parsing everything?

**Yes!** Use `validateTLE()`:

```javascript
const { validateTLE } = require('tle-parser');

const result = validateTLE(tleData);

console.log('Valid:', result.valid);
console.log('Errors:', result.errors);
console.log('Warnings:', result.warnings);

// Only parse if valid
if (result.valid) {
  const parsed = parseTLE(tleData);
}
```

**See:** [API Reference - validateTLE()](api/API_REFERENCE.md#validatetle)

---

### What if my TLE is corrupted?

**Use the state machine parser for recovery:**

```javascript
const { parseWithStateMachine } = require('tle-parser');

const result = parseWithStateMachine(corruptedTLE, {
  attemptRecovery: true,
  includePartialResults: true
});

if (result.success) {
  console.log('Fully recovered');
} else if (result.data) {
  console.log('Partial recovery');
  console.log('Parsed:', result.parsedFields);
  console.log('Failed:', result.failedFields);
} else {
  console.log('Recovery failed');
}
```

**See:** [Error Recovery](guides/ERROR_HANDLING.md#error-recovery)

---

### How performant is this parser?

**Benchmarks** (approximate, hardware-dependent):
- **Single TLE**: ~0.1-0.5 ms
- **1,000 TLEs**: ~100-500 ms
- **10,000 TLEs**: ~1-5 seconds

**Optimization tips:**
- Use `validate: false` if you trust the data
- Batch process large files
- Use worker threads for CPU-intensive tasks
- Cache parsed results

**See:** [Performance Guide](guides/PERFORMANCE.md)

---

## Historical and Special Cases

### Why are some TLE epoch years in the 1900s?

**Y2K Convention:**
- **00-56**: Interpreted as 2000-2056
- **57-99**: Interpreted as 1957-1999

**Example:**
```
Epoch year: 95 → 1995
Epoch year: 20 → 2020
```

**The library handles this automatically.**

**Warning:** You'll get `DEPRECATED_EPOCH_YEAR_WARNING` for 1900s epochs.

**See:** [TLE Format - Epoch](guides/TLE_FORMAT.md#epoch-time-of-tle)

---

### What does "classified" TLE mean?

**Classification levels:**
- **U**: Unclassified (public, most TLEs)
- **C**: Classified
- **S**: Secret

**Classified TLEs:**
- May have **reduced precision** (intentional errors)
- **Delayed** updates
- Restricted distribution

**In parser:**
- Triggers `CLASSIFIED_DATA_WARNING`
- Data is still parsed normally
- Don't use for critical applications

**See:** [TLE Format - Classification](guides/TLE_FORMAT.md#classification)

---

### Can TLEs be used for interplanetary objects?

**No.** TLEs are specifically for **Earth-orbiting** objects.

**For deep space objects:**
- Use **SPICE** kernels (NASA JPL)
- Use **Horizons** ephemerides
- Use **Minor Planet Center** orbital elements

**TLE limitations:**
- Assumes Earth's gravity as primary force
- SGP4/SDP4 models don't work beyond Earth orbit

---

## Troubleshooting

### "TLE line must be exactly 69 characters"

**Cause:** Line is too short or too long.

**Solutions:**
1. Check for truncation during copy/paste
2. Remove extra spaces at end
3. Convert tabs to spaces
4. Verify source data integrity

```javascript
// Debug line length
console.log('Line 1 length:', line1.length);  // Should be 69
console.log('Line 2 length:', line2.length);  // Should be 69
```

**See:** [Troubleshooting Guide](guides/TROUBLESHOOTING.md#tle-line-must-be-exactly-69-characters)

---

### "Satellite numbers must match between lines"

**Cause:** Line 1 and Line 2 have different satellite numbers.

**Solutions:**
1. Verify you haven't mixed TLEs from different satellites
2. Check for data corruption
3. Use permissive mode if you need partial data

```javascript
// Debug satellite numbers
const lines = tleData.split('\n');
console.log('Line 1 sat #:', lines[0].substring(2, 7));
console.log('Line 2 sat #:', lines[1].substring(2, 7));
```

**See:** [Troubleshooting Guide](guides/TROUBLESHOOTING.md#satellite-numbers-must-match-between-lines)

---

### How do I report a bug?

1. **Check existing issues**: https://github.com/your-repo/tle-parser/issues
2. **Create new issue** with:
   - TLE data (if not sensitive)
   - Error message
   - Code snippet
   - Expected vs actual behavior
   - Library version

**Minimal example:**
```javascript
const { parseTLE } = require('tle-parser');

const tleData = `[YOUR TLE HERE]`;

try {
  const result = parseTLE(tleData);
  console.log(result);
} catch (error) {
  console.error('Error:', error);
}
```

---

## Learning Resources

### I want to learn more about orbital mechanics

**Books:**
- "Fundamentals of Astrodynamics" - Bate, Mueller, White
- "Orbital Mechanics for Engineering Students" - Howard Curtis

**Online:**
- NASA tutorials: https://spaceflight.nasa.gov/
- Celestrak articles: https://celestrak.org/columns/
- AGI (STK) resources: https://www.agi.com/resources

**See:** [Orbital Mechanics Guide](guides/ORBITAL_MECHANICS.md)

---

### Where can I find example TLE data for testing?

**Test TLEs included in this repo:**
- ISS (LEO, 51.6° inclination)
- Hubble (LEO, 28.5° inclination)
- GPS satellite (MEO, 12-hour period)
- Various historical TLEs

**Online sources:**
- CelesTrak: https://celestrak.org/
- Space-Track: https://www.space-track.org/

---

## See Also

- [API Reference](api/API_REFERENCE.md) - Complete function documentation
- [Usage Examples](guides/USAGE_EXAMPLES.md) - Practical code examples
- [Error Handling Guide](guides/ERROR_HANDLING.md) - Error patterns
- [Troubleshooting](guides/TROUBLESHOOTING.md) - Common issues
- [TLE Format Guide](guides/TLE_FORMAT.md) - Format specification
- [Orbital Mechanics](guides/ORBITAL_MECHANICS.md) - Physics concepts
